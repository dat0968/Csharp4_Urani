@model IEnumerable<Sanpham>

@{
    ViewData["Title"] = "Details";
}
<style>
    /* Thêm lớp CSS để thay đổi màu nút tăng giảm */
    .btn-yellow {
        background-color: rgb(255, 211, 51);
        border-color: rgb(255, 211, 51);
    color: black;
    }

    .btn-yellow:hover {
            background-color: rgb(255, 211, 51); /* Màu vàng đậm hơn khi hover */
            border-color: rgb(255, 211, 51);
    color: black;
    }

</style>
<!-- Breadcrumb Start -->
<div class="container-fluid">
    <div class="row px-xl-5">
        <div class="col-12">
            <nav class="breadcrumb bg-light mb-30">
                <a class="breadcrumb-item text-dark" href="#">TRANG CHỦ</a>

                <span class="breadcrumb-item active">CHI TIẾT SẢN PHẨM</span>
            </nav>
        </div>
    </div>
</div>
<!-- Breadcrumb End -->
<!-- Shop Detail Start -->
@foreach (var item in Model)
{
    var hinhanhsanpham = item.Hinhanhs?.FirstOrDefault()?.HinhAnh1;
    <div class="container-fluid pb-5">
        <div class="row px-xl-5">
            <div class="col-lg-5 mb-30">
                <div id="product-carousel" class="carousel slide" data-ride="carousel">
                    <div class="carousel-inner bg-light">
                        @if (item.Hinhanhs != null && item.Hinhanhs.Any())
                        {
                            var firstImage = item.Hinhanhs.First().HinhAnh1;
                            <div class="carousel-item active">
                                <img class="w-100 h-100" src="~/HinhAnh/SanPham/@item.Hinh" alt="Image">
                            </div>
                            foreach (var hinhanh in item.Hinhanhs.Skip(1))
                            {
                                <div class="carousel-item">
                                    <img class="w-100 h-100" src="~/HinhAnh/SanPham/@hinhanh.HinhAnh1" alt="Image">
                                </div>
                            }
                        }
                        else
                        {
                            <div class="carousel-item active">
                                <img class="w-100 h-100" src="~/HinhAnh/SanPham/@item.Hinh" alt="Image">
                            </div>
                        }
                    </div>
                    <a class="carousel-control-prev" href="#product-carousel" data-slide="prev">
                        <i class="fa fa-2x fa-angle-left text-dark"></i>
                    </a>
                    <a class="carousel-control-next" href="#product-carousel" data-slide="next">
                        <i class="fa fa-2x fa-angle-right text-dark"></i>
                    </a>
                </div>
            </div>

            <div class="col-lg-7 h-auto mb-30">
                <div class="h-100 bg-light p-30">
                    <h3>@item.TenSp</h3>
                    <div class="d-flex mb-3">
                        <div class="text-primary mr-2">
                            <small class="fas fa-star"></small>
                            <small class="fas fa-star"></small>
                            <small class="fas fa-star"></small>
                            <small class="fas fa-star-half-alt"></small>
                            <small class="far fa-star"></small>
                        </div>
                        <small class="pt-1">(99 Reviews)</small>
                    </div>
                    <form asp-action="AddToCart" asp-controller="Cart" asp-route-id="@item.MaSp" >
                        <div class="d-flex mb-3">
                            <strong class="text-dark mr-3">Kích Thước:</strong>
                            @foreach (var kichthuoc in item.Chitietkichthuocs)
                            {
                                <div class="custom-control custom-radio custom-control-inline mr-3">
                                    <input type="radio" class="custom-control-input" id="size-@kichthuoc.MaKichThuoc" name="size" value="@kichthuoc.MaKichThuocNavigation.KichThuoc1" required>
                                    <label class="custom-control-label" for="size-@kichthuoc.MaKichThuoc">
                                        @(kichthuoc.MaKichThuocNavigation?.KichThuoc1 ?? "N/A")
                                    </label>
                                </div>
                            }
                        </div>
                        <div class="d-flex mb-4">
                            <strong class="text-dark mr-3">Màu:</strong>
                            @foreach (var mausac in item.Chitietmausacs)
                            {                        
                                    <div class="custom-control custom-radio custom-control-inline">
                                    <input type="radio" class="custom-control-input" id="color-@mausac.MaMau" name="color" value="@mausac.MaMauNavigation.TenMau" required >
                                    <label class="custom-control-label" for="color-@mausac.MaMau">
                                        @(mausac.MaMauNavigation?.TenMau ?? "N/A")
                                    </label>
                                </div>                   
                            }
                        </div>
                        <div class="d-flex mb-4">
                        <strong class="text-dark mr-3">Chất liệu:</strong>
                        @foreach (var chatlieu in item.Chitietchatlieus)
                        {
                            <div class="custom-control custom-radio custom-control-inline">
                                    <input type="radio" class="custom-control-input" id="chat-@chatlieu.MaChatLieu" name="chatlieu" value="@chatlieu.MaChatLieuNavigation.TenChatLieu" required>
                                <label class="custom-control-label" for="chat-@chatlieu.MaChatLieu">
                                    @(chatlieu.MaChatLieuNavigation?.TenChatLieu ?? "N/A")
                                </label>
                            </div>
                        }
                        </div>

                        <!--Nút tăng giảm số lượng-->

                        <div class="d-flex align-items-center mb-4">
                       
                            <div class="input-group" style="width: 120px;">
                                <div class="input-group-prepend">
                                    <button class="btn btn-yellow" type="button" onclick="decreaseQuantity()">-</button>
                                </div>
                                <input type="number" id="quantity" name="quantity" class="form-control text-center" value="1" min="1" max="@item.SoLuongBan">
                                <div class="input-group-append">
                                    <button class="btn btn-yellow" type="button" onclick="increaseQuantity()">+</button>
                                </div>
                            </div>

                        
                            <button type="submit" class="btn btn-primary px-3 ml-3">
                                <i class="fa fa-shopping-cart mr-1"></i> Thêm giỏ hàng
                            </button>
                        </div>



                        


                    </form>
                    <div  class="tab-content">
                        <div class="nav nav-tabs mb-4">
                            <a style="margin-top: 35px" class="nav-item nav-link text-dark active" data-toggle="tab" href="#tab-pane-1">MÔ TẢ SẢN PHẨM</a>

                        </div>
                        <div class="tab-pane fade show active" id="tab-pane-1">
                            <p>
                                @item.MoTa
                                @* <br />
                                Kích thước nhỏ
                                <br />
                                - Chiều dài: 20cm
                                - Chiều rộng: 15cm
                                - Chiều cao: 10cm
                                <br />
                                Kích thước trung bình
                                <br />
                                - Chiều dài: 30cm
                                - Chiều rộng: 25cm
                                - Chiều cao: 15cm
                                <br />
                                Kích thước lớn
                                <br />
                                - Chiều dài: 40cm
                                - Chiều rộng: 30cm
                                - Chiều cao: 20cm *@
                            </p>
                        </div>
                    </div>

                </div>
            </div>
        </div>
    </div>
}
<!-- Shop Detail End -->
<!-- Products Start -->
<div class="container-fluid py-5">
    <h2 class="section-title position-relative text-uppercase mx-xl-5 mb-4">
        <span class="bg-secondary pr-3">SẢN PHẨM TƯƠNG TỰ</span>
    </h2>
    <div class="row px-xl-5">
        <div class="col">
            <div class="owl-carousel related-carousel">
                @foreach (var item in ViewBag.SanPhamTuongTu as List<Sanpham>)
                {
                    <div class="product-item bg-light">
                        <div class="product-img position-relative overflow-hidden">
                            <img class="img-fluid w-100 h-50" src="~/HinhAnh/SanPham/@item.Hinh" alt="">
                            <div class="product-action">
                                <a asp-action="Details" asp-controller="CuaHang" asp-route-id="@item.MaSp" class="btn btn-outline-dark btn-square">Xem Thêm</a>
                                @* <a class="btn btn-outline-dark btn-square" href=""><i class="fa fa-shopping-cart"></i></a>
                                <a class="btn btn-outline-dark btn-square" href=""><i class="far fa-heart"></i></a>
                                <a class="btn btn-outline-dark btn-square" href=""><i class="fa fa-sync-alt"></i></a>
                                <a asp-action="Details" asp-controller="CuaHang" asp-route-id="@item.MaSp" class="btn btn-outline-dark btn-square"><i class="fa fa-search"></i></a> *@
                            </div>
                        </div>
                        <div class="text-center py-4">
                            <a asp-action="Details" asp-controller="CuaHang" asp-route-id="@item.MaSp" class="h6 text-decoration-none text-truncate">@item.TenSp</a>
                            <div class="d-flex align-items-center justify-content-center mt-2">
                                <h5>@item.DonGiaBan.ToString("#,##0") đ</h5>
                            </div>
                            <div class="d-flex align-items-center justify-content-center mb-1">
                                <small class="fa fa-star text-primary mr-1"></small>
                                <small class="fa fa-star text-primary mr-1"></small>
                                <small class="fa fa-star text-primary mr-1"></small>
                                <small class="fa fa-star text-primary mr-1"></small>
                                <small class="fa fa-star text-primary mr-1"></small>
                                <small>(99)</small>
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>
<!-- Products End -->

<script>
    function increaseQuantity() {
        var quantityInput = document.getElementById("quantity");
        var currentQuantity = parseInt(quantityInput.value);
        var maxQuantity = parseInt(quantityInput.getAttribute("max"));

        if (currentQuantity < maxQuantity) {
            quantityInput.value = currentQuantity + 1;
        }
    }

    function decreaseQuantity() {
        var quantityInput = document.getElementById("quantity");
        var currentQuantity = parseInt(quantityInput.value);

        if (currentQuantity > 1) {
            quantityInput.value = currentQuantity - 1;
        }
    }

    // Kiểm tra giá trị nhập tay để đảm bảo không vượt quá số lượng tối đa
    document.getElementById("quantity").addEventListener("input", function() {
        var quantityInput = document.getElementById("quantity");
        var currentQuantity = parseInt(quantityInput.value);
        var maxQuantity = parseInt(quantityInput.getAttribute("max"));
        var minQuantity = parseInt(quantityInput.getAttribute("min"));

        // Nếu số lượng nhập vào vượt quá tối đa hoặc tối thiểu, chỉnh sửa lại
        if (currentQuantity > maxQuantity) {
            quantityInput.value = maxQuantity;
        } else if (currentQuantity < minQuantity) {
            quantityInput.value = minQuantity;
        }
    });
</script>

